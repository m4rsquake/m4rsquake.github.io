


[{"content":"\rIntroduction #\rAlthough the Raspberry Pi 4B has relatively strong performance, its network interface is not excellent, only suitable as a 100Mbps wireless router. Deploying OpenWrt via Docker allows the Raspberry Pi to function as a router while hosting other services. Note: This setup is more about tinkering than practical use, and using Docker for multiple services might cause instability in the wireless soft router.\nPreparations #\rRaspberry Pi SD Card Raspberry Pi os (make sure your Raspberry Pi os is working properly) 1. Enable Ethernet Card Promiscuous Mode #\r$sudo nano /etc/network/interfaces # Modify to (add) the following content # interfaces(5) file used by ifup(8) and ifdown(8) # Include files from /etc/network/interfaces.d: source /etc/network/interfaces.d/* auto eth0 allow-hotplug eth0 iface eth0 inet dhcp up ip link set eth0 promisc on 2. Set Up Wireless Hotspot (AP) #\rCreate a hotspot via the graphical interface and set a static IPv4 address to 192.168.0.254.\n3. Install and Configure Docker #\rsudo apt update -y sudo apt install docker.io -y sudo systemctl enable docker sudo systemctl start docker # Add the current user to the Docker user group sudo gpasswd -a $USER docker newgrp docker sudo modprobe veth 4. Create Docker Network #\rdocker network create -d macvlan --subnet=192.168.0.0/24 --gateway=192.168.0.253 -o parent=wlan0 macwan docker network create -d macvlan --subnet=x.x.x.x/24 --gateway=x.x.x.x -o parent=eth0 macwan Note: The subnet and gateway for the macwan network must match your router\u0026rsquo;s subnet.\n5. Create Container #\rdocker run --restart always --name openwrt -d --network maclan --privileged --ip 192.168.0.1 \u0026#34;registry.cn-shanghai.aliyuncs.com/suling/openwrt:rpi4\u0026#34; /sbin/init The container image address is for the Chinese version of OpenWrt. You can change it to the official openWrt. 6. Modify Docker Network Configuration #\r# Enter the container docker exec -it openwrt /bin/sh # vi /etc/config/network Modify to the following:\nconfig interface \u0026#39;lan\u0026#39; option type \u0026#39;bridge\u0026#39; option ifname \u0026#39;eth0\u0026#39; option proto \u0026#39;static\u0026#39; option ipaddr \u0026#39;192.168.0.1\u0026#39; option netmask \u0026#39;255.255.255.0\u0026#39; option ip6assign \u0026#39;60\u0026#39; After modification, restart the network:\n/etc/init.d/network restart 7. Connect macwan to Container (Host) #\rdocker network connect macwan openwrt 8. Access OpenWrt Console #\rConnect another device to the Raspberry Pi AP and enter 192.168.0.1 in the browser to access the OpenWrt console. If you cannot access it, check if your device\u0026rsquo;s IP is in the same subnet as the Raspberry Pi AP. If not, enter it manually.\nAfter accessing, add the WAN network interface:\nSelect the interface to include as eth1.\nSave and apply the changes, and the devices connected to the Raspberry Pi AP should now be online!\n","externalUrl":null,"permalink":"/en/pages/raspberrypi_docker_wifi/","section":"Pages","summary":"\u003ch3 class=\"relative group\"\u003eIntroduction \r\n    \u003cdiv id=\"introduction\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#introduction\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cp\u003eAlthough the Raspberry Pi 4B has relatively strong performance, its network interface is not excellent, only suitable as a 100Mbps wireless router. Deploying OpenWrt via Docker allows the Raspberry Pi to function as a router while hosting other services. Note: This setup is more about tinkering than practical use, and using Docker for multiple services might cause instability in the wireless soft router.\u003c/p\u003e","title":"Running OpenWrt on Raspberry Pi 4B via Docker for Wireless Routing","type":"pages"},{"content":"","externalUrl":null,"permalink":"/en/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","externalUrl":null,"permalink":"/en/pages/","section":"Pages","summary":"","title":"Pages","type":"pages"},{"content":"","externalUrl":null,"permalink":"/en/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","externalUrl":null,"permalink":"/en/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","externalUrl":null,"permalink":"/en/tags/tinkering/","section":"Tags","summary":"","title":"Tinkering","type":"tags"},{"content":"","externalUrl":null,"permalink":"/en/tags/tutorial/","section":"Tags","summary":"","title":"Tutorial","type":"tags"},{"content":"","externalUrl":null,"permalink":"/en/","section":"Welcome to Blowfish! ðŸŽ‰","summary":"","title":"Welcome to Blowfish! ðŸŽ‰","type":"page"},{"content":"","externalUrl":null,"permalink":"/tags/%E6%8A%98%E8%85%BE/","section":"Tags","summary":"","title":"æŠ˜è…¾","type":"tags"},{"content":"","externalUrl":null,"permalink":"/tags/%E6%95%99%E7%A8%8B/","section":"Tags","summary":"","title":"æ•™ç¨‹","type":"tags"}]